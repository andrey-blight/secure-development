# Hadolint configuration for Dockerfile linting
# Documentation: https://github.com/hadolint/hadolint#configure

# Ignore specific rules if needed
ignored:
  # DL3008: Pin versions in apt-get install - we use --no-install-recommends and clean up
  # Uncomment to ignore: - DL3008

# Trusted registries (optional)
trustedRegistries:
  - docker.io
  - ghcr.io

# Failure threshold
# error, warning, info, style, ignore, none
failure-threshold: warning

# Format: tty, json, checkstyle, codeclimate, gitlab_codeclimate, codacy, sonarqube, sarif
format: json

# Strict mode - treat warnings as errors
strict-labels: false

# Override specific rules
override:
  error:
    # Critical security rules
    - DL3000  # Use absolute WORKDIR
    - DL3002  # Do not switch to root USER
    - DL3007  # Using latest tag
    - DL3047  # Avoid curl wget and ADD in same RUN

  warning:
    - DL3003  # Use WORKDIR to switch to a directory
    - DL3006  # Always tag the version of an image explicitly
    - DL3015  # Avoid additional packages by specifying --no-install-recommends
    - DL3018  # Pin versions in apk add
    - DL3025  # Use arguments JSON notation for CMD and ENTRYPOINT arguments
    - DL3027  # Do not use apt
    - DL4001  # Either use Wget or Curl but not both
    - DL4006  # Set the SHELL option -o pipefail before RUN with a pipe in it

  style:
    - DL3059  # Multiple consecutive RUN instructions
